<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        【译】使用约束布局(ConstraintLayout)构建灵活的UI | 谢盒盒的小黑屋
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.ico">
    <link rel="icon" sizes="192x192" href="/img/favicon.ico">
    <link rel="apple-touch-icon" href="/img/favicon.ico">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#039BE5">
    <meta name="author" content="paradoxie">
    <meta name="description" content="抱歉，我的梦想是当一条咸鱼">
    <meta name="keywords" content="Android技术">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="谢盒盒的小黑屋">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://blog.prozin.xyz">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="【译】使用约束布局(ConstraintLayout)构建灵活的UI | 谢盒盒的小黑屋">
    <meta property="og:description" content="抱歉，我的梦想是当一条咸鱼">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->

<!-- Theme Background -->

    <style>
        body{
            background-color: #B3F1F1
        }
		
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
		
        #scheme-Paradox .MD-burger-layer {
            background-color: #666;
        }
		
        #scheme-Paradox .material-back{
            color: #666;
        }
		
        .material-layout .material-post>.material-nav,
		.material-layout .material-index>.material-nav,
        .material-nav a,
        #scheme-Paradox .material-post_container .material-back{
            color: #666;
        }
    </style>


<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #039BE5
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #039BE5 !important
    }
    
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #00BCD4 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #039BE5 !important
    }
    
    .fab{
        background: #00BCD4 !important
    }
</style>
	<script src="/js/jquery.min.js"></script>
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Paradox">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
                <!-- Hamburger Button -->
                <button class="MD-burger-icon sidebar-toggle">
                    <span class="MD-burger-layer"></span>
                </button>
				
				
                
	<!-- Back Button -->
	<div class="material-back" id="backhome-div" tabindex="0">
		<a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#" onclick="window.history.back();return false;" target="_self" role="button" data-upgraded=",MaterialButton,MaterialRipple">
			<i class="material-icons" role="presentation">arrow_back</i>
			<span class="mdl-button__ripple-container">
				<span class="mdl-ripple"></span>
			</span>
		</a>
	</div>			


<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	<!-- Paradox Post Header -->
	
		
			<!-- Random Thumbnail -->
			<div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
				<script>
    
    var randomNum;
    randomNum = Math.floor(Math.random() * 5 + 1);
    
    $(".post_thumbnail-random").css('background-image', 'url(' + '/img/random/' + randomNum + '.png' + ')');
    
</script>

		
	
        <p class="article-headline-p">
            【译】使用约束布局(ConstraintLayout)构建灵活的UI
        </p>
    </div>

	

				
				
					<!-- Paradox Post Info -->
					<div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
    
    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>paradoxie</strong>
        <span>9月 22, 2016</span>
    </div>
    
    <div class="section-spacer"></div>
	
    <!-- Favorite -->
<!--
    <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
        <i class="material-icons" role="presentation">favorite</i>
        <span class="visuallyhidden">favorites</span>
    </button>
-->
    
    <!-- Tags (bookmark) -->
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Android-studio/">Android studio</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/ConstraintLayout/">ConstraintLayout</a>
    </ul>
    
    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    
    <!-- Leancloud Views -->
    <a class="post_share-link" href="#">
        <li class="mdl-menu__item">
            <span id="/2016/09/22/constraintlayout/" class="leancloud-views_num" data-flag-title="【译】使用约束布局(ConstraintLayout)构建灵活的UI">
     &nbsp;浏览量
</span>
        </li>
    </a>
    
    
    
    <!-- Busuanzi Views -->
    <a class="post_share-link" href="#">
        <li class="mdl-menu__item">
            <span id="busuanzi_container_page_pv">
                <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
            </span>
        </li>
    </a>
    
    
    <!-- Share Twitter -->
    <a class="post_share-link" href="https://twitter.com/intent/tweet?text=【译】使用约束布局(ConstraintLayout)构建灵活的UI&url=http://blog.prozin.xyz//2016/09/22/constraintlayout/index.html&via=paradoxie" target="_blank">
        <li class="mdl-menu__item">
            分享到 Twitter
        </li>
    </a>
    
    <!-- Share Google+ -->
    <a class="post_share-link" href="https://plus.google.com/share?url=http://blog.prozin.xyz//2016/09/22/constraintlayout/index.html" target="_blank">
        <li class="mdl-menu__item">
            分享到 Google+
        </li>
    </a>
    
    <!-- Share Weibo -->
    <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=【译】使用约束布局(ConstraintLayout)构建灵活的UI&url=http://blog.prozin.xyz//2016/09/22/constraintlayout/index.html&pic=&searchPic=false&style=simple" target="_blank">
        <li class="mdl-menu__item">
            分享到微博
        </li>
    </a>
</ul>
</div>
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
		<p>Google I/O 2016上，Android团队为开发者带来了ConstraintLayout，一种构建于弹性Constraints（约束）系统的新型Android Layout，据说它将大大改变今后的Android布局界面开发方式，据说也许以后Android开发没有那么多布局需要学习，只需要熟悉这一种布局即可。前两天Android studio 2.2正式版发布了，更多的Android 开发者会接触并(可能)使用这个布局。</p>
<a id="more"></a>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言:"></a>前言:</h1><blockquote>
<p>1.本文系<a href="https://developer.android.com/training" target="_blank" rel="external">https://developer.android.com/training</a> 内对约束布局(ConstraintLayout)  文章的翻译</p>
<p>2.阅读本文可以对照原文<a href="https://developer.android.com/training/constraint-layout/index.html#adjust-the-view-margins" target="_blank" rel="external">Build a Responsive UI with ConstraintLayout</a>，科学上网</p>
<p>3.本文可对照实战入门教程食用：<a href="http://www.jianshu.com/p/792d2682c538" target="_blank" rel="external">安卓约束控件(ConstraintLayout)扁平化布局入门</a></p>
<p>4.文章内view均翻译为视图，也可理解为控件</p>
<p>5.文章中涉及的video我还不知道怎么转移哇，要看视频演示的点进原文，还有涉及的一些关键词链接，科学上网你懂的。原文用到的图片我转移到了github，但是github你们也懂的，有时候是真不给力ಥ_ಥ</p>
<p>6.水平有限，翻译上的错误和偏差求指导求轻喷ಥ_ಥ</p>
</blockquote>
<hr>
<h1 id="使用约束布局-ConstraintLayout-构建灵活的UI"><a href="#使用约束布局-ConstraintLayout-构建灵活的UI" class="headerlink" title="使用约束布局(ConstraintLayout)构建灵活的UI"></a>使用约束布局(ConstraintLayout)构建灵活的UI</h1><p>约束布局允许你在相同视图层级中(不是相互层叠的视图组合)制作大而复杂的布局。它类似于相对布局那样所有的视图位置是根据子布局或父布局决定的，但是它比相对布局更加灵活，并且在Android studio布局编辑器中更加易用。<br>你可以直接在布局编辑器的可视化工具中做约束布局中所做的所有事，因为布局API和布局编辑器已经做了特地融合。所以你可以通过拖拽使用约束布局构建你的布局，而不需要再去编辑XML文件。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-56580854d286a98d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图1，布局编辑器中的约束布局"></p>
<p>约束布局可以在兼容Android2.3(API 9)或者更高的API库中使用，而新的布局编辑器则在Android studio2.2中可用。</p>
<p>这篇文章提供了一个在Android studio中使用约束布局构建一个布局的指导。如果你想要了解关于布局编辑器更多信息，在这个 <a href="https://developer.android.com/studio/write/layout-editor.html" target="_blank" rel="external">Build a UI with Layout Editor</a>Android studio指导中查看.</p>
<h1 id="约束概述"><a href="#约束概述" class="headerlink" title="约束概述"></a>约束概述</h1><p>为了定义在约束布局中视图的位置，你必须为视图添加两个或更多约束条件。每个约束代表了和另个视图、父布局或不可见指引线的联系或对齐。每个约束限定了视图是沿着垂直轴还是水平轴的位置，所以每个视图必须在每个轴最少拥有一个约束，但经常需要更多。</p>
<p>当你往布局编辑器中拖拽一个视图时，它会停留在你扔下它的位置，即使它没有任何约束。然鹅，这只是为了使编辑更简单。当一个视图没有任何约束时，你在设备上运行起来后，它会被绘制在左上角[0,0]的位置。</p>
<p>在图2里面，布局在编辑器中看起来不错，但是对于TextView B没有对其进行竖直方向上的约束。当这个布局被绘制到设备上时，TextView B会在水平方向上水平与ImageView的左右边缘对齐，但是出现在屏幕的顶部，因为它没有数值方向上的约束。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-15a78dddc41fc2b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图2，缺少垂直方向约束的TextView B"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-9b5a11e1d285fe50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图3，TextView B现在在垂直方向上约束于ImageView"></p>
<p>虽然缺少约束条件不会造成编译错误，但布局编辑器会在ToolBar中展示为一个错误指示缺少约束条件。要查看错误或者其他警告，可以点击<a href="">Show Warnings and Errors</a>.为了帮你避免忽视约束条件，布局编辑器会使用<a href="https://developer.android.com/training/constraint-layout/index.html#use-autoconnect-and-infer-constraints" target="_blank" rel="external"> Autoconnect and infer constraints</a>功能为你自动添加约束。</p>
<h1 id="在你的工程中添加约束布局"><a href="#在你的工程中添加约束布局" class="headerlink" title="在你的工程中添加约束布局"></a>在你的工程中添加约束布局</h1><p>要在你的工程中使用约束布局，步骤如下：</p>
<p>1，确定你有最新的Constraint Layout library；</p>
<pre><code>1.点击Tools &gt; Android &gt; SDK Manager.
2.点击 SDK Tools栏.
3.展开Support Repository，然后检查ConstraintLayout for Android，
    并且Solver for ConstraintLayout.
    检查Show Package Details，注意你下载的版本（你需要的是下面这个）。
4.点击OK.
5.在你的module-level build.gradle文件里面添加ConstraintLayout library作为依赖：
</code></pre><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support.constraint:constraint-layout:1.0.0-alpha8'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>你下载的库版本或许会更高，所以确保你指定的版本跟第三步中的版本相匹配。</p>
</blockquote>
<pre><code>6.在toolbar或者sync提示中，点击Sync Project with Gradle Files.
</code></pre><p>现在你可以使用ConstraintLayout构建布局了.</p>
<h2 id="转换布局"><a href="#转换布局" class="headerlink" title="转换布局"></a>转换布局</h2><p>按照以下步骤，将现有的布局转换为约束布局：</p>
<pre><code>1.在Android Studio打开你的布局，点击编辑器窗口最下面的Design标签.
2.在Component Tree窗口，右键布局，然后点击Convert layout to ConstraintLayout.
</code></pre><p><img src="http://upload-images.jianshu.io/upload_images/532408-1e00744a541d9d27.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图4,转换为ConstraintLayout的功能菜单"></p>
<h2 id="新建布局"><a href="#新建布局" class="headerlink" title="新建布局"></a>新建布局</h2><p>以下步骤开始新建一个约束布局文件：</p>
<pre><code>1.在Project窗口任意位置右键，然后选择File &gt; New &gt; XML &gt; Layout XML.
2.输入布局文件名字，然后输入&quot;android.support.constraint.ConstraintLayout&quot;
 作为布局根标签.
3.点击完成.
</code></pre><h2 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h2><p>首先从Palette窗口拖拽一个视图到编辑器。当你在约束布局中添加一个视图时，它显示为一个每个角都带有正方形手柄，并且每边都带有的环形手柄的边框</p>
<p>点击选中视图，然后点击并按住约束手柄之一并拖动线到可用的锚点(另一个视图的边缘，布局的边缘，或者一条引导线)。当你释放的时候，约束生成，带有默认的<a href="https://developer.android.com/training/constraint-layout/index.html#adjust-the-view-margins" target="_blank" rel="external">a default margin</a>分离两个视图。</p>
<p><a href="https://storage.googleapis.com/androiddevelopers/videos/studio/studio-constraint-first.mp4" target="_blank" rel="external">video1,视图左侧被约束到布局左侧</a></p>
<p>video1</p>
<p>新建约束时，记住以下规则：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">*每一个视图至少有两个约束：一个垂直方向，一个水平方向。</span></div><div class="line"><span class="comment">*只有在约束手柄和锚点在同一平面时才能新建约束，</span></div><div class="line">	所以一个视图的垂直平面(左右侧)只能被约束到另一垂直平面。</div><div class="line">	并且基线只能约束到其他基线。</div><div class="line"><span class="comment">*每个约束手柄只能被用于一个约束，但是可以对同一个锚点创建多个约束(从不同的视图)</span></div></pre></td></tr></table></figure>
<blockquote>
<p>选中一个视图然后点击约束手柄，可以删除一个约束。</p>
</blockquote>
<p>如果你在一个视图中添加对立的约束，约束线变成像弹簧一样的波浪来表示反动势力，就像<a href="https://storage.googleapis.com/androiddevelopers/videos/studio/studio-constraint-second.mp4" target="_blank" rel="external">video2</a>中展示的一样。</p>
<p>当视图的大小被设为『fixed』或者『wrap content』时，这种情况下视图位于约束条件中心时，效果最为明显。如果你希望视图撑开尺寸以满足约束条件，改变尺寸至”any size”；或者如果想保持目前的大小，单移动视图，使其不居中，可以调整约束偏置。</p>
<h1 id="有许多方式可以来约束一个视图，但下面的约束类型提供了基本构建模板"><a href="#有许多方式可以来约束一个视图，但下面的约束类型提供了基本构建模板" class="headerlink" title="有许多方式可以来约束一个视图，但下面的约束类型提供了基本构建模板"></a>有许多方式可以来约束一个视图，但下面的约束类型提供了基本构建模板</h1><h2 id="父约束"><a href="#父约束" class="headerlink" title="父约束"></a>父约束</h2><p>视图的侧面连接到相应布局的边缘。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-4db943ba21b8a160.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图5"></p>
<p>图5中，视图的左边被连接到父布局的左边缘.</p>
<h2 id="位置约束"><a href="#位置约束" class="headerlink" title="位置约束"></a>位置约束</h2><p>给两个视图定义出现的次序，垂直或者水平。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-8864929ec98e938c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图6"></p>
<p>图6中，Button被约束于ImageView下边缘24dp处，</p>
<h2 id="对齐约束"><a href="#对齐约束" class="headerlink" title="对齐约束"></a>对齐约束</h2><p>对齐视图的边缘到其他视图的同意边缘。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-8da3d7f3aaf8a0d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图7"></p>
<p>图7中，Button的左边缘被对齐到ImageView的左边缘。<br>你可以从约束向里拖动视图校准偏移。比如，在</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-ba2409311b7a46b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图8"></p>
<p>图8中，展示了相同的Button偏移了24dp，这是通过约束视图边界限定的偏移。</p>
<h2 id="基线对齐约束"><a href="#基线对齐约束" class="headerlink" title="基线对齐约束"></a>基线对齐约束</h2><p>对齐视图的文本基线到其他视图的文本基线。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-e59f711d399ed75b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图9"></p>
<p>图9中，第一行的TextView被对齐到Button的text。<br>将鼠标悬停在基线手柄两秒钟，直至手柄闪烁白色。然后点击并拖出一条线到另一个基线，创建出一个基线约束。</p>
<h2 id="引导线约束"><a href="#引导线约束" class="headerlink" title="引导线约束"></a>引导线约束</h2><p>在想附加约束的地方可以添加水平或垂直的引导线，你可以在布局内部基于相对于布局边缘的dp或是百分比定位引导线。</p>
<p>在toolbar中点击Guidelines，然后再点击Add Vertical Guidelin或者Add Horizontal Guideline创建引导线。</p>
<p>点击引导线边缘的环形toggle，切换用于定位引导线的测量值(从布局边缘的百分比或dp单位)</p>
<p>引导线不会对用户可见。</p>
<p><a href="https://storage.googleapis.com/androiddevelopers/videos/studio/add-layout-guideline_2-2.mp4" target="_blank" rel="external">video3</a></p>
<h2 id="使用自动连接并推断约束"><a href="#使用自动连接并推断约束" class="headerlink" title="使用自动连接并推断约束"></a>使用自动连接并推断约束</h2><p>自动连接是一个持久的模式，会为你添加到布局中的每一个视图自动创建两个或多个约束，默认为不可使用状态。你可以在布局编辑器的ToolBar中点击Turn on Autoconnect来启用。</p>
<p>当其可用时，你添加的每个视图都会为你自动创建约束。它不会对布局中已经存在的视图创建约束。一旦约束创建，如果你想拖拽视图,约束不会改变。所以如果你想明显的重新定位视图的位置，必须先删除约束。</p>
<p>或者，你可以点击Infer Constraints为布局中所有的视图创建约束。</p>
<p>推断约束（Infer Constraints）是一次性的动作，以扫描整个布局以确定所有视图最有效的约束，因此它可能创建彼此相隔很远之间的约束。然鹅，自动连接(Autoconnect)创建的约束只是在你添加的视图上，并且它创建的约束只会在附近的元素上。这两种情况下，你可以随时通过点击约束手柄删除修改约束，然后创建一个新的约束。</p>
<p><a href="https://storage.googleapis.com/androiddevelopers/videos/studio/constraint-autoconnect_2-2.mp4" target="_blank" rel="external">video4</a></p>
<h2 id="调整视图大小"><a href="#调整视图大小" class="headerlink" title="调整视图大小"></a>调整视图大小</h2><p>你可以用视图每个角的额手柄来改变视图的大小，但是你应该规避对大多数视图做宽度和高度的硬编码，应为硬编码视图大小无法适应不同的内容和屏幕尺寸。点击视图，打开编辑器右侧的Properties窗口，选择一种动态调整大小的模式或者定义更多具体的尺寸。如</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-ea29b54fe5488be1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图10，Properties窗口包括①视图尺寸，②边距，③约束偏置"></p>
<p>图10，Properties窗口包括①视图尺寸，②边距，③约束偏置,在窗口顶部是视图检查器。</p>
<p>灰色方框代表选中的视图，方框内的符号(卧槽这个符号我就用字符代替了哈ಠ౪ಠ)表示宽度和高度值可以用如下方式设置：</p>
<pre><code>* &gt;&gt;&gt;Wrap Content:视图自适应为其内容大小。
* |-/|/|/-|Any Size:视图按照匹配的约束适应大小。
    视图没有指定明确的尺寸，实际值为0dp，但是它按照满足需求的约束调整了大小。
    然而，如果给定的尺寸只有一个约束，那么该视图自适应其内容。
    另一种思路可以认为它是&quot;match constraints&quot;（等同于match_parent）。
    因为它会在满足每个约束和边距条件后，尽可能的扩展视图。
*|---|Fixed:在文本框中指定尺寸，或者在编辑器中调整视图大小。
</code></pre><p>点击符号，可在这些设置之间切换。</p>
<blockquote>
<p>Note:在约束布局中的所有视图，都应该使用match_parent，而不是 “Any Size” (0dp)。</p>
</blockquote>
<h2 id="调整约束偏置"><a href="#调整约束偏置" class="headerlink" title="调整约束偏置"></a>调整约束偏置</h2><p>当你在一个视图（相同尺寸的视图大小为”fixed”或”wrap content”）两侧添加一个约束时，默认情况下该视图成为两个锚点的中心，偏置为50%。你可以通过在Properties窗口中拖动偏置滑块或者直接拖动视图来调整偏置，如<a href="https://storage.googleapis.com/androiddevelopers/videos/studio/adjust-constraint-bias.mp4" target="_blank" rel="external">video5,调整约束偏置</a>.</p>
<p>如果你想让视图满足约束的情况下撑开大小，切换视图尺寸至任何大小”any size”。</p>
<p>##调整视图边距</p>
<p>为了确保你所有的视图是均匀分布，点击ToolBar中的Margin 8，对你添加进布局的视图选择默认边距。这个按钮会变为显示你当前边距的选项，你对默认边距的修改只会应用于修改之后添加的所有的视图。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/532408-98f2549e2ac45200.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图11，ToolBar的Margin按钮，点击调整默认边距"></p>
<p>你可以通过点击在Properties窗口里面代表约束线上面的数字，来控制每个视图的边距（图10中，每个边距被设置为16dp）.</p>
<p>工具提供的所有边距为8dp的原因是为了让你的视图跟随Material Design大法的<a href="https://material.google.com/layout/metrics-keylines.html" target="_blank" rel="external"> 8dp square grid recommendations</a></p>
<h1 id="以上"><a href="#以上" class="headerlink" title="以上"></a>以上</h1><hr>
<blockquote>
<p>本文作者：paradoxie</p>
<p>个人主页：<a href="http://www.paradoxie.cf/" target="_blank" rel="external">谢盒盒的小黑屋，不止说技术</a></p>
<p>简书地址：<a href="http://www.jianshu.com/users/05f39939cbf3/latest_articles" target="_blank" rel="external">简书主页，专注技术类</a></p>
<p>github地址：<a href="https://github.com/paradoxie" target="_blank" rel="external">paradoxie</a></p>
<p>转载请注明出处，蟹蟹!</p>
<p>——-我的梦想真的是做一条咸鱼！</p>
</blockquote>

	
	
	
	
</div>
				
				

                <!-- Post Comments -->
                
    <!-- 使用多说评论 -->
    <link rel="stylesheet" href="/css/duoshuo.min.css">
<style>
    #ds-thread #ds-reset .ds-post-button{
        background-color: #039BE5 !important;
    }
    #ds-wrapper #ds-reset .ds-icons-32{
        background-color: #039BE5 !important;
    }
    #ds-reset .ds-highlight {
        color: #039BE5 !important;
    }
</style>
<div id="comments">
    <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="undefined" data-title="【译】使用约束布局(ConstraintLayout)构建灵活的UI" data-url="http://blog.prozin.xyz//2016/09/22/constraintlayout/index.html"></div>
    <!-- 多说评论框 end -->
</div>



            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2016/10/13/版本检测更新/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/09/18/环信IM问题汇总/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
					<!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay "></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored  sidebar-fixed-left" role="navigation">
	<div id="sidebar-main">
	    <!-- Sidebar Header -->
		<div class="sidebar-header header-cover" style="background-image: url(/img/header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpg" alt="paradoxie's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        paradoxieix@gmail.com
        <b class="caret"></b>
    </a>
</div>

		<!-- Sidebar Navigation  -->
		<ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
			
                <li>
                    <a href="#" target="_blank" title="Email Me">
						<i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
             主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
<!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
-->

	
    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">六月 2016<span class="sidebar_archives-count">1</span></a>
        </ul>
    </li>

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
	
		<li>
			<a href="/about" title="关于">
				关于
			</a>
		</li>
	
	

    <!-- Article Numebr  -->
    <li>
        <a href="#">
             文章总数
             <span class="sidebar-badge">22</span>
        </a>
    </li>
</ul>

		<!-- Sidebar Divider -->
		<div class="sidebar-divider"></div>

		<!-- Sidebar Footer -->
		<!-- 
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持。 :) 
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
	<div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		主题 - Material
		<span class="sidebar-badge badge-circle">i</span>
	</div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		sidebar.help
		<span class="mdl-button__ripple-container">
			<span class="mdl-ripple"></span>
		</span>
	</div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

	</div>
    
    <!-- Sidebar Sponsor -->
    


</aside>

				
				
				
					<!-- Floating Action Button -->
<div class="fabs">
    <a href="#top" class="fab toTop">
        <i class="material-icons">expand_less</i>
    </a>
    
    
        <!-- Post Nav -->
        
            <a class="prev-content fab" href="/2016/10/13/版本检测更新/" title="《Android APP应该有的东西》之功能篇：版本检测更新"><i class="material-icons">keyboard_arrow_left</i></a>
        

        
            <a class="prev-content fab" href="/2016/09/18/环信IM问题汇总/" title="环信IM问题汇总"><i class="material-icons">keyboard_arrow_right</i></a>
        
    
    
    
    
    <a href="#bottom" class="fab toBottom">
        <i class="material-icons">keyboard_arrow_down</i>
    </a>
    
    <a id="prime" class="fab">
        <i class="material-icons prime-i-add">add</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
		<!-- Paradox Footer Left Section -->
		<div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
    <a href="https://twitter.com/twitter" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
        <span class="visuallyhidden">Twitter</span>
    </button></a>
    
    
    <!-- Facebook -->
    
    <a href="https://www.facebook.com/facebook" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.png);">
        <span class="visuallyhidden">Facebook</span>
    </button></a>
    
    
    <!-- Google + -->
    
    <a href="https://www.google.com/" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.png);">
        <span class="visuallyhidden">Google Plus</span>
    </button></a>
    
    
    <!-- Weibo -->
    
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    
</div>


		<!--Copyright-->
		<div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;谢盒盒的小黑屋</div>

		<!-- Paradox Footer Right Section -->

		<!-- 
		I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
		It will not impact the appearance and can give developers a lot of support :)

		很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
		它不会影响美观并可以给开发者很大的支持。 :) 
		-->

		<div class="mdl-mini-footer--right-section">
			<div>
				<div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
				<div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
			</div>
		</div>
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>


	<script src="/js/smoothscroll.js"></script>



    <!-- Leancloud -->
	<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
	<script>
		AV.initialize("14ITxsrDSyDpUVG0DDl7KLUG-gzGzoHsz", "grMiCPWi1w73ufSbLzxy2doC");
	</script>
    <script>
	function showTime(Counter) {
		var query = new AV.Query(Counter);
		$(".leancloud-views_num").each(function() {
			var url = $(this).attr("id").trim();
			query.equalTo("url", url);
			query.find({
				success: function(results) {
					if (results.length == 0) {
						var content = '0 ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
						return;
					}
					for (var i = 0; i < results.length; i++) {
						var object = results[i];
						var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					}
				},
				error: function(object, error) {
					console.log("Error: " + error.code + " " + error.message);
				}
			});

		});
	}

	function addCount(Counter) {
		var Counter = AV.Object.extend("Counter");
		url = $(".leancloud-views_num").attr('id').trim();
		title = $(".leancloud-views_num").attr('data-flag-title').trim();
		var query = new AV.Query(Counter);
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length > 0) {
					var counter = results[0];
					counter.fetchWhenSave(true);
					counter.increment("time");
					counter.save(null, {
						success: function(counter) {
							var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
							$(document.getElementById(url)).text(content);
						},
						error: function(counter, error) {
							console.log('Failed to save Visitor num, with error message: ' + error.message);
						}
					});
				} else {
					var newcounter = new Counter();
					newcounter.set("title", title);
					newcounter.set("url", url);
					newcounter.set("time", 1);
					newcounter.save(null, {
						success: function(newcounter) {
							console.log("newcounter.get('time')="+newcounter.get('time'));
							var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
							$(document.getElementById(url)).text(content);
						},
						error: function(newcounter, error) {
							console.log('Failed to create');
						}
					});
				}
			},
			error: function(error) {
				console.log('Error:' + error.code + " " + error.message);
			}
		});
	}
	$(function() {
		var Counter = AV.Object.extend("Counter");
		if ($('.leancloud-views_num').length == 1) {
			addCount(Counter);
		} else if ($('.post-title-link').length > 1) {
			showTime(Counter);
		}
	}); 
</script>



    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    <!-- 多说公共 js 代码 start -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"paradoxie"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'https://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
             || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
    <!-- 多说公共 js 代码 end -->












	<script>
		$(".fabs").mouseleave(function(){
			if( $("#prime").hasClass("is-visible") )
				$("#prime").click();
		});
	</script>

            </main>
        </div>
		
    </body>
		
	
</html>
